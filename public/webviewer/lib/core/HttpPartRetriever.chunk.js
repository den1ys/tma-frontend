/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[0],{384:function(ia,z,e){e.r(z);e.d(z,"ByteRangeRequest",function(){return ja});var fa=e(1),x=e(0);e.n(x);var ha=e(2),da=e(132);ia=e(84);var ea=e(216),ca=e(65),w=e(61),aa=e(215),r=e(142);e=e(316);var n=[],f=[],h=window,ba=function(){return function(){this.Rk=1}}(),y;(function(f){f[f.UNSENT=0]="UNSENT";f[f.DONE=4]="DONE"})(y||(y={}));var ja=function(){function e(f,e,n,r){var w=this;this.url=f;this.range=e;this.He=n;this.withCredentials=
r;this.AX=y;this.request=new XMLHttpRequest;this.request.open("GET",this.url,!0);h.Uint8Array&&(this.request.responseType="arraybuffer");r&&(this.request.withCredentials=r);ka.DISABLE_RANGE_HEADER||(Object(x.isUndefined)(e.stop)?this.request.setRequestHeader("Range","bytes="+e.start):this.request.setRequestHeader("Range",["bytes=",e.start,"-",e.stop-1].join("")));n&&Object.keys(n).forEach(function(f){w.request.setRequestHeader(f,n[f])});this.request.overrideMimeType?this.request.overrideMimeType("text/plain; charset=x-user-defined"):
this.request.setRequestHeader("Accept-Charset","x-user-defined");this.status=aa.a.NOT_STARTED}e.prototype.start=function(f){var e=this,n=this.request;n.onreadystatechange=function(){if(e.aborted)return e.status=aa.a.ABORTED,f({code:aa.a.ABORTED});if(this.readyState===e.AX.DONE){e.vz();var r=0===window.document.URL.indexOf("file:///");200===n.status||206===n.status||r&&0===n.status?(r=h.KO(this),e.Wr(r,f)):(e.status=aa.a.ERROR,f({code:e.status,status:e.status}))}};this.request.send(null);this.status=
aa.a.STARTED};e.prototype.Wr=function(f,e){this.status=aa.a.SUCCESS;if(e)return e(!1,f)};e.prototype.abort=function(){this.vz();this.aborted=!0;this.request.abort()};e.prototype.vz=function(){var h=Object(r.c)(this.url,this.range,f);-1!==h&&f.splice(h,1);if(0<n.length){h=n.shift();var w=new e(h.url,h.range,this.He,this.withCredentials);h.request=w;f.push(h);w.start(Object(r.d)(h))}};e.prototype.extend=function(f){var e=Object.assign({},this,f.prototype);e.constructor=f;return e};return e}(),ka=function(e){function h(f,
h,n,r,w){n=e.call(this,f,n,r)||this;n.Uk={};n.hy=h;n.url=f;n.DISABLE_RANGE_HEADER=!1;n.xv=ja;n.qJ=3;n.He=w||{};return n}Object(fa.c)(h,e);h.prototype.Ft=function(f,e,h){var n=-1===f.indexOf("?")?"?":"&";switch(h){case !1:case w.a.NEVER_CACHE:f=f+n+"_="+Object(x.uniqueId)();break;case !0:case w.a.CACHE:f=f+n+"_="+e.start+","+(Object(x.isUndefined)(e.stop)?"":e.stop)}return f};h.prototype.LM=function(f,e,h,n){void 0===h&&(h={});return new this.xv(f,e,h,n)};h.prototype.j3=function(e,h,r,w,y){for(var aa=
0;aa<n.length;aa++)if(Object(x.isEqual)(n[aa].range,h)&&Object(x.isEqual)(n[aa].url,e))return n[aa].dg.push(w),n[aa].tA++,null;for(aa=0;aa<f.length;aa++)if(Object(x.isEqual)(f[aa].range,h)&&Object(x.isEqual)(f[aa].url,e))return f[aa].dg.push(w),f[aa].tA++,null;r={url:e,range:h,hy:r,dg:[w],tA:1};if(0===n.length&&f.length<this.qJ)return f.push(r),r.request=this.LM(e,h,y,this.withCredentials),r;n.push(r);return null};h.prototype.wm=function(e,h,w){var y=this.Ft(e,h,this.hy);(e=this.j3(y,h,this.hy,w,
this.He))&&e.request.start(Object(r.d)(e));return function(){var e=Object(r.c)(y,h,f);if(-1!==e){var w=--f[e].tA;0===w&&f[e].request&&f[e].request.abort()}else e=Object(r.c)(y,h,n),-1!==e&&(w=--n[e].tA,0===w&&n.splice(e,1))}};h.prototype.rO=function(){return{start:-da.a}};h.prototype.G6=function(){var f=-(da.a+da.e);return{start:f-da.d,end:f}};h.prototype.hr=function(f){var e=this;this.ny=!0;var h=da.a;this.wm(this.url,this.rO(),function(n,r,w){function y(){var h=e.wd.nO();e.wm(e.url,h,function(n,
r){if(n)return Object(ha.j)("Error loading central directory: "+n),f(n);r=Object(ca.a)(r);if(r.length!==h.stop-h.start)return f("Invalid XOD file: Zip central directory data is wrong size! Should be "+(h.stop-h.start)+" but is "+r.length);e.wd.PR(r);e.QD=!0;e.ny=!1;return f(!1)})}if(n)return Object(ha.j)("Error loading end header: "+n),f(n,r,w);r=Object(ca.a)(r);if(r.length!==h)return f("Invalid XOD file: Zip end header data is wrong size!");try{e.wd=new ea.a(r)}catch(na){return f(na)}e.wd.k8?e.wm(e.url,
e.G6(),function(h,n){if(h)return Object(ha.j)("Error loading zip64 header: "+h),f(h);n=Object(ca.a)(n);e.wd.B8(n);y()}):y()})};h.prototype.IO=function(f){f(Object.keys(this.wd.Wl))};h.prototype.kH=function(f,e){var h=this;if(this.wd.DM(f)){var n=this.wd.oz(f);if(n in this.Uk){var r=this.fh[f];r.Vp=this.Uk[n];r.Vp.Rk++;r.cancel=r.Vp.cancel}else{var w=this.wd.W4(f),y=this.wm(this.url,w,function(r,y){r?(Object(ha.j)('Error loading part "'+f+'": '+r),h.wm(h.url,w,function(r,y){if(r)return e(r,f);h.TR(y,
w,n,f,e)})):h.TR(y,w,n,f,e)}),x=this.fh[f];x&&(x.fU=!0,x.cancel=function(){x.Vp.Rk--;0===x.Vp.Rk&&(y(),delete h.Uk[n])},this.Uk[n]=new ba(n),x.Vp=this.Uk[n],x.Vp.cancel=x.cancel)}}else delete this.fh[f],e(Error('File not found: "'+f+'"'),f)};h.prototype.TR=function(f,e,h,n,r){if(f.length!==e.stop-e.start)r(Error("Part data is wrong size!"),n);else{do{if(!this.Uk[h])return;n=this.Uk[h].Rk;for(var w=e.Po.length,y=0;y<w;++y){var x=e.Po[y];r(!1,x.Mo,f["string"===typeof f?"substring":"subarray"](x.start,
x.stop),this.wd.EP(x.Mo));x.Mo in this.fh&&delete this.fh[x.Mo]}}while(n!==this.Uk[h].Rk);delete this.Uk[h]}};h.DISABLE_RANGE_HEADER=!1;h.qJ=3;return h}(ia.a);(function(f){function e(e,h,n){var r=f.call(this)||this,w;for(w in e)r[w]=e[w];r.Wja=e;r.startOffset=h;r.endOffset=n;r.LM=function(f,h,n,w){Object(x.isUndefined)(h.stop)?(h.start+=r.endOffset,h.stop=r.endOffset):(h.start+=r.startOffset,h.stop+=r.startOffset);f=r.Ft(r.url,h,r.hy);return new e.xv(f,h,n,w)};return r}Object(fa.c)(e,f);return e})(ka);
Object(e.a)(ka);Object(e.b)(ka);z["default"]=ka}}]);}).call(this || window)
